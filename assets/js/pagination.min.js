"use strict";var merchant=merchant||{};merchant.pagination={defaults:{button:document.querySelector(".merchant-pagination-button"),pagination:document.querySelector(".woocommerce-pagination"),next:document.querySelector(".woocommerce-pagination .next"),itemsWrapper:document.querySelector(".site-main .products"),itemsTag:"li",items:".site-main .products .product",currentPage:1,totalPages:null!==document.querySelector(".merchant-pagination-button")?parseInt(document.querySelector(".merchant-pagination-button").getAttribute("data-total-pages")):0,infiniteScroll:null!==document.querySelector(".merchant-pagination-button")&&"infinite-scroll"===document.querySelector(".merchant-pagination-button").getAttribute("data-pagination-type"),eventPrefix:"merchant.shop",triggerOffset:200},domReady:function(t){if("function"==typeof t)return"interactive"===document.readyState||"complete"===document.readyState?t():void document.addEventListener("DOMContentLoaded",t,!1)},init:function(){var t;return void 0!==this.defaults.button&&null!==this.defaults.pagination&&(t=!!matchMedia("screen and (max-width: 767px)").matches,this.ename=t?"touchend":"click",this.defaults.button.addEventListener("click",this.loadMoreButtonEventHandler.bind(this)),this.defaults.button.addEventListener("touchend",this.loadMoreButtonEventHandler.bind(this)),this.defaults.infiniteScroll&&(this.infiniteScroll(),this.isAlmostInViewport(this.defaults.button))&&this.defaults.button.dispatchEvent(new Event(this.ename)),void window.dispatchEvent(new Event(this.defaults.eventPrefix+".pagination.initialized")))},loadMoreButtonEventHandler:function(t){t.preventDefault(),this.defaults.button.classList.contains("loading")||this.loadMorePosts(this.defaults),this.defaults.button.classList.add("loading")},loadMorePosts:function(){if(this.defaults.currentPage>=this.defaults.totalPages)return!1;var d=this,t=new XMLHttpRequest,e=this.defaults.next.getAttribute("href");t.open("GET",e,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.onload=function(){if(200<=this.status&&this.status<400){for(var t=document.createElement("html"),e=(t.innerHTML=this.responseText,"function"==typeof Masonry&&d.defaults.itemsWrapper.classList.contains("masonry-brick")),n=e?Masonry.data(d.defaults.itemsWrapper.parentElement):"",a="function"==typeof Masonry&&d.defaults.itemsWrapper.classList.contains("masonry"),i=a?d.defaults.itemsWrapper.querySelector(d.defaults.items):"",s=a?Masonry.data(d.defaults.itemsWrapper):"",o=t.querySelectorAll(d.defaults.items),r=0;r<o.length;r++){var u=document.createElement(d.defaults.itemsTag);u.setAttribute("class",o[r].classList.value),e||a||(u.classList.add("mrc-animated"),u.classList.add("mrcPagFadeInShort"),u.classList.add("mrc-anim-duration-300ms"),u.classList.add("mrc-anim-fowards"),u.setAttribute("style","animation-delay: "+200*r+"ms;")),u.innerHTML=o[r].innerHTML,d.defaults.itemsWrapper.append(u),e?(n.appended(u),n.layout()):a&&(u.style.width=i.style.width,u.style.marginBottom=i.style.marginBottom,s.appended(u),s.layout())}d.defaults.button.classList.remove("loading"),d.maybeInitExtraFeatures(),d.updateNextURL(),d.defaults.infiniteScroll&&d.isAlmostInViewport(d.defaults.button)&&d.defaults.button.dispatchEvent(new Event("click")),d.hideButton(),window.dispatchEvent(new Event(d.defaults.eventPrefix+".pagination.items.added"))}},t.send()},updateNextURL:function(){var t=this.defaults.currentPage<this.defaults.totalPages?this.defaults.currentPage+1:this.defaults.currentPage,e=this.defaults.next.getAttribute("href").replace("/page/"+t,"/page/"+(t+1));0<this.defaults.next.getAttribute("href").indexOf("paged=")?e=this.defaults.next.getAttribute("href").replace("paged="+t,"paged="+(t+1)):0<this.defaults.next.getAttribute("href").indexOf("/comment-page-")?e=this.defaults.next.getAttribute("href").replace("/comment-page-"+t,"/comment-page-"+(t+1)):0<this.defaults.next.getAttribute("href").indexOf("cpage=")&&(e=this.defaults.next.getAttribute("href").replace("cpage="+t,"cpage="+(t+1))),this.defaults.currentPage++,this.defaults.next.setAttribute("href",e)},hideButton:function(){this.defaults.currentPage>=this.defaults.totalPages&&this.defaults.button.remove()},infiniteScroll:function(){var t=this;window.addEventListener("scroll",function(){t.isAlmostInViewport(t.defaults.button)&&t.defaults.button.dispatchEvent(new Event(t.ename))})},maybeInitExtraFeatures:function(){null!==document.querySelector(".merchant-quick-view-popup")&&void 0!==merchant.quickView&&merchant.quickView.init(),null!==document.querySelector(".merchant-wishlist-button")&&void 0!==merchant.wishList&&merchant.wishList.init(),"undefined"!=typeof a2a&&a2a.init_all()},isAlmostInViewport:function(t){return t.getBoundingClientRect().bottom-this.defaults.triggerOffset<=(window.innerHeight||document.documentElement.clientHeight)}},merchant.pagination.domReady(setTimeout(function(){merchant.pagination.init()},100));