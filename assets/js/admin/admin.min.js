"use strict";!function(h,s,r){var i={};h(r).ready(function(){h(".merchant-module-page-setting-field").each(function(){var n,e,r=h(this);r.data("condition")&&r.data("condition").length&&(n=r.data("condition"),(e=h('input[name="merchant['+n[0]+']"],select[name="merchant['+n[0]+']"]')).length)&&e.on("change merchant.change",function(e){var t=h(this),a=!1;switch(n[1]){case"==":"radio"!==t.attr("type")&&"checkbox"!==t.attr("type")||t.is(":checked")&&t.val()==n[2]&&(a=!0),t.is("select")&&t.val()==n[2]&&(a=!0);break;case"any":"radio"!==t.attr("type")&&"checkbox"!==t.attr("type")||t.is(":checked")&&n[2].split("|").includes(t.val())&&(a=!0),t.is("select")&&n[2].split("|").includes(t.val())&&(a=!0)}a?r.removeClass("merchant-hide").addClass("merchant-show"):r.removeClass("merchant-show").addClass("merchant-hide")}).trigger("merchant.change")});var e=h(".merchant-module-page-ajax-form"),a=h(".merchant-module-page-ajax-header");h(".merchant-module-save-button");h(".merchant-module-page-content").on("change keypress change.merchant",":input:not(.merchant-module-question-answer-textarea):not(.merchant-license-code-input)",function(){i.show_save||(a.addClass("merchant-show"),a.removeClass("merchant-saving"),i.show_save=!0)}),e.ajaxForm({beforeSubmit:function(){a.addClass("merchant-saving")},success:function(){var t;a.removeClass("merchant-show"),i.show_save=!1,h(".merchant-module-action").hasClass("merchant-enabled")||((t=h(".merchant-module-alert")).addClass("merchant-show"),h(r).off("click.merchant-alert-close"),h(r).on("click.merchant-alert-close",function(e){h(e.target).closest(".merchant-module-alert-wrapper").length||(t.removeClass("merchant-show"),h(r).off("click.merchant-alert-close"))}))}}),h(".merchant-module-question-answer-button").on("click",function(e){e.preventDefault();var e=h(this),t=h(".merchant-module-question-answer-textarea");h(".merchant-module-question-answer-dropdown").removeClass("merchant-show"),h(".merchant-module-question-thank-you-dropdown").addClass("merchant-show"),s.wp.ajax.post("merchant_module_feedback",{subject:t.data("subject"),message:t.val(),module:e.closest(".merchant-module-action").find(".merchant-module-page-button-action-activate").data("module"),nonce:s.merchant.nonce})}),h(".merchant-module-page-button-action-activate").on("click",function(e){e.preventDefault(),h(".merchant-module-question-list-dropdown").removeClass("merchant-show"),h(".merchant-module-question-answer-dropdown").removeClass("merchant-show"),h(".merchant-module-question-answer-form").removeClass("merchant-show"),h(".merchant-module-question-answer-title").removeClass("merchant-show"),h(".merchant-module-question-thank-you-dropdown").removeClass("merchant-show"),h(".merchant-module-question-answer-textarea").val(""),s.wp.ajax.post("merchant_module_activate",{module:h(this).data("module"),nonce:s.merchant.nonce}).done(function(){h("body").removeClass("merchant-module-disabled").addClass("merchant-module-enabled"),h(".merchant-module-action").addClass("merchant-enabled")})}),h(".merchant-module-page-button-action-deactivate").on("click",function(e){e.preventDefault(),s.wp.ajax.post("merchant_module_deactivate",{module:h(this).data("module"),nonce:s.merchant.nonce}).done(function(){h("body").removeClass("merchant-module-enabled").addClass("merchant-module-disabled"),h(".merchant-module-action").removeClass("merchant-enabled"),h(".merchant-module-question-list-dropdown").addClass("merchant-show")})}),h(".merchant-module-question-list-dropdown li").on("click",function(e){var t=h(this),a=t.data("answer-target"),a=h('[data-answer-title="'+a+'"]');a.length?(a.addClass("merchant-show").siblings().removeClass("merchant-show"),h(".merchant-module-question-answer-dropdown").addClass("merchant-show"),h(".merchant-module-question-answer-textarea").attr("data-subject",t.text().trim())):(h(".merchant-module-question-thank-you-dropdown").addClass("merchant-show"),h(".merchant-module-question-answer-dropdown").removeClass("merchant-show")),h(".merchant-module-question-answer-textarea").val(""),h(".merchant-module-question-list-dropdown").removeClass("merchant-show")}),h(".merchant-module-dropdown-close").on("click",function(e){e.preventDefault(),h(this).closest(".merchant-module-dropdown").removeClass("merchant-show")}),h(".merchant-module-page-button-deactivate").on("click",function(e){e.preventDefault();h(this);var t=h(".merchant-module-deactivate-dropdown");t.toggleClass("merchant-show"),h(r).off("click.merchant-close"),h(r).on("click.merchant-close",function(e){h(e.target).closest(".merchant-module-deactivate").length||(t.removeClass("merchant-show"),h(r).off("click.merchant-close"))})}),h(".merchant-range").each(function(){var e=h(this),n=e.find(".merchant-range-input"),r=e.find(".merchant-range-number-input");n.on("change input merchant.range merchant-init.range",function(e){var t=h(this),e=("merchant"===e.type?r:t).val()||0,a=t.attr("min")||0,a=(e-a)/((t.attr("max")||1)-a)*100;t.css({background:"linear-gradient(to right, #3858E9 0%, #3858E9 "+a+"%, #ddd "+a+"%, #ddd 100%)"}),n.val(e),r.val(e)}).trigger("merchant-init.range"),r.on("change input blur",function(){n.hasClass("merchant-range-input")&&n.val(h(this).val()).trigger("merchant.range")})}),h(".merchant-color").each(function(){var t,a,e=h(this),n=e.find(".merchant-color-picker"),r=e.find(".merchant-color-input");n.on("click",function(){var e=h("body,html");e.addClass("merchant-height-auto"),t?a.setColor(r.val()):((a=new Pickr({el:n.get(0),container:"body",theme:"merchant",appClass:"merchant-pcr-app",default:r.val()||"#212121",swatches:["#000000","#F44336","#E91E63","#673AB7","#03A9F4","#8BC34A","#FFEB3B","#FFC107","#FFFFFF"],sliders:"h",useAsButton:!0,components:{hue:!0,preview:!0,opacity:!0,interaction:{input:!0,clear:!0}},i18n:{"btn:clear":"Default"}})).on("change",function(e){e=(1===e.a?(a.setColorRepresentation("HEX"),e.toHEXA()):(a.setColorRepresentation("RGBA"),e.toRGBA())).toString(0);n.css({"background-color":e}),r.val()!==e&&r.val(e).trigger("change.merchant")}),a.on("clear",function(){var e=n.data("default-color");e?a.setColor(e):(n.css({"background-color":"white"}),r.val(""))}),a.on("hide",function(){e.removeClass("merchant-height-auto")}),n.data("pickr",a),setTimeout(function(){a.show()}),t=!0)}),r.on("change keyup",function(){var e=h(this).val();n.css({"background-color":e})})}),{init:function(e){this.events()},events:function(){var a=this;h(".merchant-sortable").each(function(){var e=h(this),t=e.find(".merchant-sortable-input");h(e.find("ul.merchant-sortable-list").first()).sortable({update:function(){t.val(a.sortableGetNewVal(e)).trigger("change.merchant")}}).disableSelection().find("li").each(function(){h(this).find("i.visibility").click(function(){h(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){h(event.target).hasClass("dashicons-visibility")&&t.val(a.sortableGetNewVal(e)).trigger("change.merchant")})})},sortableGetNewVal:function(e){var e=h(e.find("li")),t=[];return _.each(e,function(e){h(e).hasClass("invisible")||t.push(h(e).data("value"))}),JSON.stringify(t)}}.init(),{init:function(e){var n=this;h(".merchant-sortable-repeater-control").each(function(){var e=JSON.parse(h(this).find(".merchant-sortable-repeater-input").val()),t=e.length;if(0<t&&(h(this).find(".repeater-input").val(e[0]),1<t))for(var a=1;a<t;++a)n.appendRow(h(this),e[a]);h(this).hasClass("disable-sorting")||h(this).find(".merchant-sortable-repeater.sortable").sortable({update:function(e,t){n.getAllInputs(h(this).parent())}})}),this.events()},events:function(){var t=this;h(".merchant-sortable-repeater.sortable").on("click",".customize-control-sortable-repeater-delete",function(e){e.preventDefault(),1<h(this).parent().parent().find(".repeater").length?h(this).parent().slideUp("fast",function(){var e=h(this).parent().parent();h(this).remove(),t.getAllInputs(e)}):t.getAllInputs(h(this).parent().parent().parent())}),h(".customize-control-sortable-repeater-add").click(function(e){e.preventDefault(),t.appendRow(h(this).parent()),t.getAllInputs(h(this).parent())}),h(".merchant-sortable-repeater.sortable").change(function(){t.getAllInputs(h(this).parent())}),h(".merchant-sortable-repeater.sortable").on("focusout",".repeater-input",function(){t.getAllInputs(h(this).parent())})},appendRow:function(e){var t='<div class="repeater" style="display:none"><input type="text" value="'+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")+'" class="repeater-input" /><span class="dashicons dashicons-menu"></span><a class="customize-control-sortable-repeater-delete" href="#"><span class="dashicons dashicons-no-alt"></span></a></div>';e.find(".sortable").append(t),e.find(".sortable").find(".repeater:last").slideDown("slow",function(){h(this).find("input").focus()})},getAllInputs:function(e){var t=e.find(".repeater-input").map(function(){return h(this).val()}).toArray();e.find(".merchant-sortable-repeater-input").val(JSON.stringify(t)),e.find(".merchant-sortable-repeater-input").trigger("change")}}.init();({init:function(){this.events()},events:function(){var l=this;h(r).on("click",".merchant-create-page-control-button",function(e){e.preventDefault();var t=h(this),a=t.parent().find(".merchant-create-page-control-create-message"),n=t.parent().find(".merchant-create-page-control-success-message"),e=(t.text(),t.data("creating-text")),r=(t.data("created-text"),t.data("page-title")),i=t.data("page-meta-key"),o=t.data("page-meta-value"),s=t.data("option-name"),c=t.data("nonce");if(!r)return!1;h(this).text(e),h(this).attr("disabled",!0),h.ajax({type:"post",url:ajaxurl,data:{action:"merchant_create_page_control",page_title:r,page_meta_key:i,page_meta_value:o,option_name:s,nonce:c},success:function(e){l.ajaxResponseHandler(e,t,n,a)}})})},ajaxResponseHandler:function(e,t,a,n){"success"===e.status&&(e=a.find("a").attr("href").replace("?post=&","?post="+e.page_id+"&"),a.find("a").attr("href",e),a.css("display","block"),n.remove(),t.remove())}}).init(),h(".merchant-module-page-setting-field-gallery").each(function(){var n,r=h(this),e=r.find(".merchant-gallery-button"),i=r.find(".merchant-gallery-input"),o=r.find(".merchant-gallery-images"),t=r.find(".merchant-gallery-remove");o.sortable({helper:"original",update:function(e,t){var a=[];o.find(".merchant-gallery-image").each(function(){a.push(h(this).data("item-id"))}),i.val(a.join(",")).trigger("change")}});t.on("click",function(e){e.preventDefault(),h(this).parent().remove();var t=[];o.find(".merchant-gallery-image").each(function(){t.push(h(this).data("item-id"))}),i.val(t.join(",")).trigger("change")}),e.on("click",function(e){h(this);var t=i.val(),a=t?"edit":"add";e.preventDefault(),void 0!==s.wp&&s.wp.media&&s.wp.media.gallery&&("add"==a?(n=s.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():n=s.wp.media.gallery.edit('[gallery ids="'+t+'"]'),n.on("update",function(e){o.empty();e=e.models.map(function(e){var e=e.toJSON(),t=(e.sizes&&e.sizes.thumbnail&&e.sizes.thumbnail.url?e.sizes.thumbnail:e).url;return o.append('<div class="merchant-gallery-image" data-item-id="'+e.id+'"><i class="merchant-gallery-remove dashicons dashicons-no-alt"></i><img src="'+t+'" /></div>'),e.id});i.val(e.join(",")).trigger("change"),r.find(".merchant-gallery-remove").on("click",function(e){e.preventDefault(),h(this).parent().remove();var t=[];o.find(".merchant-gallery-image").each(function(){t.push(h(this).data("item-id"))}),i.val(t.join(",")).trigger("change")})}))})}),h(".merchant-module-page-setting-field-upload").each(function(){var a,n=h(this),e=n.find(".merchant-upload-button"),r=n.find(".merchant-upload-input"),i=n.find(".merchant-upload-wrapper");n.find(".merchant-upload-remove").on("click",function(e){e.preventDefault(),h(this).parent().remove(),r.val("").trigger("change")}),e.on("click",function(e){e.preventDefault(),void 0!==s.wp&&s.wp.media&&((a=a||s.wp.media({library:{type:"image"}})).open(),a.on("select",function(){i.empty();var e=a.state().get("selection").first().attributes,t=(e.sizes&&e.sizes.thumbnail&&e.sizes.thumbnail.url?e.sizes.thumbnail:e).url;i.append('<div class="merchant-upload-image"><i class="merchant-upload-remove dashicons dashicons-no-alt"></i><img src="'+t+'" /></div>'),r.val(e.id).trigger("change"),n.find(".merchant-upload-remove").on("click",function(e){e.preventDefault(),h(this).parent().remove(),r.val("").trigger("change")})}))})}),h(".merchant-module-page-settings-responsive").each(function(){var e=h(this),a=e.find(".merchant-module-page-settings-devices button"),n=e.find(".merchant-module-page-settings-device-container");a.on("click",function(e){e.preventDefault();var t=h(this).data("device");a.removeClass("active"),n.removeClass("active"),h(this).addClass("active"),n.each(function(){h(this).data("device")===t&&h(this).addClass("active")})})}),h(".merchant-animated-buttons").each(function(){var e,t,a=h(this).find("label"),n=h(".merchant-animation-demo");a.on("click",function(){n.removeClass("merchant-animation-"+e),n.removeClass("merchant-animation-"+t),e=h(this).find("input").attr("value"),setTimeout(function(){n.addClass("merchant-animation-"+e)},100),setTimeout(function(){n.removeClass("merchant-animation-"+e)},1e3)}),a.mouseover(function(){n.removeClass("merchant-animation-"+e),t=h(this).find("input").attr("value"),n.addClass("merchant-animation-"+t)}).mouseout(function(){n.removeClass("merchant-animation-"+t)})});var n=h(".merchant-notifications-sidebar"),e=(n.length&&(h(".merchant-notifications").on("click",function(e){e.preventDefault();var t=h(this),e=n.find(".merchant-notification:first-child .merchant-notification-date").data("raw-date");n.toggleClass("opened"),t.hasClass("read")||h.post(s.merchant.ajax_url,{action:"merchant_notifications_read",nonce:s.merchant.nonce,latest_notification_date:e},function(e){e.success&&setTimeout(function(){t.addClass("read")},2e3)})}),h(s).on("scroll",function(){60<s.pageYOffset&&(n.addClass("closing"),setTimeout(function(){n.removeClass("opened"),n.removeClass("closing")},300))}),h(".merchant-notifications-sidebar-close").on("click",function(e){e.preventDefault(),n.addClass("closing"),setTimeout(function(){n.removeClass("opened"),n.removeClass("closing")},300)})),h(".merchant-tabs-nav")),t=(e.length&&e.each(function(){var a=h(this).data("tab-wrapper-id");h(this).find(".merchant-tabs-nav-link").on("click",function(e){e.preventDefault();var e=h(this).closest(".merchant-tabs-nav").find(".merchant-tabs-nav-link"),t=h(this).data("tab-to"),e=(e.each(function(){h(this).closest(".merchant-tabs-nav-item").removeClass("active")}),h(this).closest(".merchant-tabs-nav-item").addClass("active"),h('.merchant-tab-content-wrapper[data-tab-wrapper-id="'+a+'"]'));e.find("> .merchant-tab-content").removeClass("active"),e.find('> .merchant-tab-content[data-tab-content-id="'+t+'"]').addClass("active")})}),h(".merchant-module-alert"));t.length&&t.find(".merchant-module-alert-close").on("click",function(e){e.preventDefault(),t.removeClass("merchant-show"),h(r).off("click.merchant-alert-close")})})}(jQuery,window,document);