"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o,s,i=[],c=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(i.push(n.value),i.length!==e);c=!0);}catch(t){l=!0,a=t}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw a}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t,e){var r,n,a,o,s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(s)return n=!(r=!0),{s:function(){s=s.call(t)},n:function(){var t=s.next();return r=t.done,t},e:function(t){n=!0,a=t},f:function(){try{r||null==s.return||s.return()}finally{if(n)throw a}}};if(Array.isArray(t)||(s=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return s&&(t=s),o=0,{s:e=function(){},n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(v,b){v(b).ready(function(){function r(){if(h(m.css))for(var t in m.css)!function(e){var t,r;m.css.hasOwnProperty(e)&&(t=b.querySelectorAll(m.css[e].selector),r=v('[name="merchant['+m.css[e].setting+']"]').val()+m.css[e].unit,t.forEach(function(t){t.style.setProperty(m.css[e].variable,r)}))}(t);if(h(m.text))for(var e in m.text){var r;m.text.hasOwnProperty(e)&&(r=v('input[name="merchant['+m.text[e].setting+']"]').val(),m.text[e].hasOwnProperty("replacements")&&(r=d(r,m.text[e])),v(m.text[e].selector).html(r))}if(h(m.attributes))for(var n in m.attributes){var a;m.attributes.hasOwnProperty(n)&&(a=(a="radio"===(a=v('[name="merchant['+m.attributes[n].setting+']"]')).attr("type")?v('[name="merchant['+m.attributes[n].setting+']"]:checked'):a).val(),m.attributes[n].hasOwnProperty("replacements")&&(a=d(a,m.attributes[n])),v(m.attributes[n].selector).attr(m.attributes[n].attribute,a))}if(h(m.classes))for(var o in m.classes)if(m.classes.hasOwnProperty(o)){if(m.classes[o].hasOwnProperty("remove")){var s,i=_createForOfIteratorHelper(m.classes[o].remove);try{for(i.s();!(s=i.n()).done;){var c=s.value;v(m.classes[o].selector).removeClass(c)}}catch(t){i.e(t)}finally{i.f()}}var l=v('[name="merchant['+m.classes[o].setting+']"]'),u=l.attr("type");"radio"===u&&(l=v('[name="merchant['+m.classes[o].setting+']"]:checked')),"checkbox"===u?l.is(":checked")?v(m.classes[o].selector).addClass(m.classes[o].add):v(m.classes[o].selector).removeClass(m.classes[o].add):(u=l.val(),m.classes[o].hasOwnProperty("add")?v(m.classes[o].selector).toggleClass(m.classes[o].add):v(m.classes[o].selector).addClass(u))}if(h(m.icons))for(var f in m.icons){var y,p;m.icons.hasOwnProperty(f)&&(p=(y=v('[name="merchant['+m.icons[f].setting+']"]:checked')).parent().find("figure img").attr("src"),f=v(m.icons[f].selector),"none"===y.val()?f.hide():(f.show(),f.attr("src",p)))}}function t(t){var e=t.attr("type");"text"===e&&t.on("keyup",r),"number"===e&&(t.on("keyup",r),t.parent().find("input[type=range]").length)&&t.parent().find("input[type=range]").on("input change",r),"radio"===e&&t.on("input",r),"checkbox"!==e&&!t.is("select")||t.on("change",r)}var m=merchantPreviewManipulators,h=function(t){return void 0!==t&&0<Object.keys(t).length};if(void 0!==m){if(h(m.css))for(var e in m.css)t(v('[name="merchant['+m.css[e].setting+']"]'));if(h(m.text))for(var n in m.text)t(v('[name="merchant['+m.text[n].setting+']"]'));if(h(m.attributes))for(var a in m.attributes)t(v('[name="merchant['+m.attributes[a].setting+']"]'));if(h(m.classes))for(var o in m.classes)t(v('[name="merchant['+m.classes[o].setting+']"]'));if(h(m.icons))for(var s in m.icons)t(v('[name="merchant['+m.icons[s].setting+']"]'));if(h(m.update))for(var i in m.update)t(v('[name="merchant['+m.update[i].setting+']"]'));for(var c=0,l=[".pcr-color-palette",".pcr-swatches button",".pcr-color-chooser",".pcr-color-opacity"];c<l.length;c++){var u=l[c];v(b).on("click",u,r)}}function y(t,e,r){var n=v('input[name="merchant['+r.setting+']"]').val();return r.hasOwnProperty("format")&&(n=r.format.replace("{string}",n)),t.replace(e,n)}var d=function(t,e){var r,n=e.replacements[0],a=e.replacements[1],o=_createForOfIteratorHelper(n.entries());try{for(o.s();!(r=o.n()).done;){var s=_slicedToArray(r.value,2),i=s[0],c=s[1],l=a[i];if("string"==typeof l&&(t=t.replace(c,l)),"object"===_typeof(l))if(l.hasOwnProperty("conditions")){var u,f=v('[name="merchant['+l.setting+']"]');for(u in l.conditions)l.conditions.hasOwnProperty(u)&&f.val()===u&&("string"==typeof l.conditions[u]&&(t=t.replace(c,l.conditions[u])),"object"===_typeof(l.conditions[u]))&&(t=y(t,c,l.conditions[u]))}else t=y(t,c,l)}}catch(t){o.e(t)}finally{o.f()}return t}})}(jQuery,(window,document));