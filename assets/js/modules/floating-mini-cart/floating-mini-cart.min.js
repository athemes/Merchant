"use strict";var merchant=merchant||{};merchant.modules=merchant.modules||{},function(r){merchant.modules.floatingMiniCart={count:void 0!==window.merchant.setting?window.merchant.setting.floating_mini_cart_count:2,init:function(t){var n,a=this,i=r("body"),o=r(".merchant-floating-mini-cart-icon"),c=r(".merchant-floating-side-mini-cart"),e=(r(".merchant-floating-side-mini-cart-overlay"),r(".merchant-floating-side-mini-cart-toggle"));if(!c.length)return!1;void 0!==window.parent.wp&&void 0!==window.parent.wp.customize?o.addClass("merchant-show"):(n=!1,r(window).on("scroll mousemove touchstart",function(){n||(a.updateFloatingMiniCartIconCount(),a.checkMiniCartCountAndDisplay(),n=!0)})),r(document.body).on("wc_fragment_refresh added_to_cart removed_from_cart",function(t,n){n&&void 0!==n[".merchant_cart_count"]&&(a.count=n[".merchant_cart_count"]),a.updateFloatingMiniCartIconCount(),a.checkMiniCartCountAndDisplay()}),e.on("click",function(t){t.preventDefault(),i.toggleClass("merchant-floating-side-mini-cart-show"),r(window).trigger("merchant.floating-mini-cart-resize")})},checkMiniCartCountAndDisplay:function(){var t=r(".merchant-floating-mini-cart-icon");"always"!==t.data("display")&&"0"==this.count?t.removeClass("merchant-show"):t.addClass("merchant-show")},updateFloatingMiniCartIconCount:function(){var n=r(".merchant-floating-mini-cart-icon-counter");n.text(),jQuery.ajax({type:"POST",url:merchant.setting.ajax_url,data:{action:"merchant_get_cart_count"},success:function(t){n.text(t)}})}},r(document).ready(function(){merchant.modules.floatingMiniCart.init()})}(jQuery);