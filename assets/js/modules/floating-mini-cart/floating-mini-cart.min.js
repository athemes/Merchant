"use strict";var merchant=merchant||{};merchant.modules=merchant.modules||{},function(c){merchant.modules.floatingMiniCart={count:void 0!==window.merchant.setting?window.merchant.setting.floating_mini_cart_count:2,init:function(t){var n,i=this,a=c("body"),e=c(".merchant-floating-mini-cart-icon"),o=(c(".merchant-floating-side-mini-cart"),c(".merchant-floating-side-mini-cart-overlay"),c(".merchant-floating-side-mini-cart-toggle"));if(!e.length)return!1;void 0!==window.parent.wp&&void 0!==window.parent.wp.customize?e.addClass("merchant-show"):(n=!1,c(window).on("scroll mousemove touchstart",function(){n||(i.updateFloatingMiniCartIconCount(),i.checkMiniCartCountAndDisplay(),n=!0)})),c(document.body).on("wc_fragment_refresh added_to_cart removed_from_cart",function(t,n){n&&void 0!==n[".merchant_cart_count"]&&(i.count=n[".merchant_cart_count"]),i.updateFloatingMiniCartIconCount(),i.checkMiniCartCountAndDisplay(),i.updateFloatingMiniCartSideContentHeight()}),c(window).on("resize merchant.floating-mini-cart-resize",function(){i.updateFloatingMiniCartSideContentHeight()}),setTimeout(function(){i.updateFloatingMiniCartSideContentHeight()},200),o.on("click",function(t){t.preventDefault(),a.toggleClass("merchant-floating-side-mini-cart-show"),c(window).trigger("merchant.floating-mini-cart-resize")})},checkMiniCartCountAndDisplay:function(){var t=c(".merchant-floating-mini-cart-icon");"always"!==t.data("display")&&"0"==this.count?t.removeClass("merchant-show"):t.addClass("merchant-show")},updateFloatingMiniCartIconCount:function(){var n=c(".merchant-floating-mini-cart-icon-counter");n.text(),jQuery.ajax({type:"POST",url:wc_add_to_cart_params.ajax_url,data:{action:"merchant_get_cart_count"},success:function(t){n.text(t)}})},updateFloatingMiniCartSideContentHeight:function(){var t=c(".merchant-floating-side-mini-cart"),n=t.find(".merchant-floating-side-mini-cart-widget-title"),i=t.find(".woocommerce-mini-cart__total"),a=t.find(".woocommerce-mini-cart__buttons"),n=c(window).innerHeight()-(n.outerHeight()+i.outerHeight()+a.outerHeight());t.find(".woocommerce-mini-cart").css({height:n})}},c(document).ready(function(){merchant.modules.floatingMiniCart.init()})}(jQuery);