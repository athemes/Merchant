"use strict";var merchant=merchant||{};merchant.modules=merchant.modules||{},function(n){merchant.modules.ajaxRealTimeSearch={init:function(){var r=this,t=document.querySelectorAll(".woocommerce-product-search .wc-search-field, .widget_product_search .search-field, .wp-block-search .wp-block-search__input, .wc-block-product-search-field");if(t.length){for(var e=0;e<t.length;e++)!function(e){t[e].setAttribute("autocomplete","off"),t[e].addEventListener("keyup",r.debounce(function(){r.searchFormHandler(t[e])},300)),t[e].addEventListener("focus",r.debounce(function(){r.searchFormHandler(t[e])},300))}(e);document.addEventListener("click",function(e){null===e.target.closest(".merchant-ajax-search-wrapper")&&r.destroy()})}},searchFormHandler:function(t){if(t.value.length<3)return!1;var a=this,e=t.value,r=t.classList,r=r.contains("wc-block-product-search-field")||r.contains("wc-search-field")?"product":"post";n.post(window.merchant.setting.ajax_url,{action:"ajax_search_callback",nonce:window.merchant.setting.nonce,type:r,search_term:e,posts_per_page:window.merchant.setting.ajax_search_results_amounth_per_search,orderby:window.merchant.setting.ajax_search_results_order_by,order:window.merchant.setting.ajax_search_results_order,display_categories:window.merchant.setting.ajax_search_results_display_categories,enable_search_by_sku:window.merchant.setting.ajax_search_results_enable_search_by_sku},function(e){var r=t.parentNode.getElementsByClassName("merchant-ajax-search-wrapper")[0],e=(void 0===r&&((r=document.createElement("div")).className="merchant-ajax-search-wrapper",t.parentNode.append(r),t.parentNode.classList.add("merchant-ajax-search")),r.innerHTML=e.output,document.querySelector(".merchant-ajax-search-products"));null!==e&&a.scrollbarVisible(e)&&e.classList.add("has-scrollbar"),a.elementIsOutOfScreenHorizontal(r)&&r.classList.add("merchant-reverse")})},destroy:function(){if(void 0!==document.querySelector("body.wp-admin"))return!1;var e=document.querySelectorAll(".merchant-ajax-search-wrapper");if(e.length)for(var r=0;r<e.length;r++)e[r].remove()},debounce:function(a,n){var c=null;return function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];window.clearTimeout(c),c=window.setTimeout(function(){a.apply(null,r)},n)}},scrollbarVisible:function(e){return e.scrollHeight>e.clientHeight},elementIsOutOfScreenHorizontal:function(e){e=e.getBoundingClientRect();return e.x+e.width>window.innerWidth}},merchant.modules.ajaxRealTimeSearch.init()}(jQuery);