"use strict";function _createForOfIteratorHelper(e,t){var r,i,n,s,a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return i=!(r=!0),{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){i=!0,n=e},f:function(){try{r||null==a.return||a.return()}finally{if(i)throw n}}};if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return a&&(e=a),s=0,{s:t=function(){},n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);r=r.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}var Siema=function(){function r(e){var t=this;if(_classCallCheck(this,r),this.config=r.mergeSettings(e),this.parentSelector="string"==typeof this.config.parentSelector?document.querySelector(this.config.parentSelector):this.config.parentSelector,this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,this.parentSelector&&(this.selector=this.parentSelector.querySelector(".merchant-carousel-stage")),null===this.selector)throw new Error("Something wrong with your selector ðŸ˜­");if("true"===this.parentSelector.getAttribute("data-initialized"))return!1;this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=r.webkitOrNot(),["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler","navNextHandler","navPrevHandler"].forEach(function(e){t[e]=t[e].bind(t)}),this.init()}return _createClass(r,[{key:"attachEvents",value:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler),this.parentSelector.querySelector(".merchant-carousel-nav-next").addEventListener("click",this.navNextHandler),this.parentSelector.querySelector(".merchant-carousel-nav-prev").addEventListener("click",this.navPrevHandler))}},{key:"detachEvents",value:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler),this.parentSelector.querySelector(".merchant-carousel-nav-next").removeEventListener("click",this.navNextHandler),this.parentSelector.querySelector(".merchant-carousel-nav-prev").removeEventListener("click",this.navPrevHandler)}},{key:"init",value:function(){this.buildNavigation(),this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this),this.parentSelector.querySelector(".merchant-carousel-stage").classList.add("show"),null!==this.parentSelector&&this.parentSelector.setAttribute("data-initialized",!0)}},{key:"buildNavigation",value:function(){var e=document.createElement("a"),t=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElement("a"),i=document.createElementNS("http://www.w3.org/2000/svg","svg");e.role="button",e.href="#",e.className="merchant-carousel-nav merchant-carousel-nav-next",t.setAttribute("width",18),t.setAttribute("height",18),t.setAttribute("viewBox","0 0 10 16"),t.setAttribute("fill","none"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("class","stroke-based"),t.innerHTML='<path d="M1.5 14.667L8.16667 8.00033L1.5 1.33366" stroke="#242021" stroke-width="1.5"></path>',e.append(t),this.parentSelector.querySelector(".merchant-carousel-wrapper").append(e),r.role="button",r.href="#",r.className="merchant-carousel-nav merchant-carousel-nav-prev",i.setAttribute("width",18),i.setAttribute("height",18),i.setAttribute("viewBox","0 0 10 16"),i.setAttribute("fill","none"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("class","stroke-based"),i.innerHTML='<path d="M8.5 1.33301L1.83333 7.99967L8.5 14.6663" stroke="#242021" stroke-width="1.5"></path>',r.append(i),this.parentSelector.querySelector(".merchant-carousel-wrapper").append(r)}},{key:"buildSliderFrame",value:function(){if(this.innerElements.length<=this.perPage)return this.parentSelector.classList.add("no-nav"),this.parentSelector.querySelector(".merchant-carousel-nav-next").remove(),this.parentSelector.querySelector(".merchant-carousel-nav-prev").remove(),!1;var e=(this.selectorWidth+this.config.margin)/this.perPage,t=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length,r=(this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=e*t+"px",this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab"),document.createDocumentFragment());if(this.config.loop)for(var i=this.innerElements.length-this.perPage;i<this.innerElements.length;i++){var n=this.buildSliderFrameItem(this.innerElements[i].cloneNode(!0));r.appendChild(n)}for(var s=0;s<this.innerElements.length;s++){n=this.buildSliderFrameItem(this.innerElements[s]);r.appendChild(n)}if(this.config.loop)for(var a=0;a<this.perPage;a++){n=this.buildSliderFrameItem(this.innerElements[a].cloneNode(!0));r.appendChild(n)}this.sliderFrame.appendChild(r),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),this.slideToCurrent()}},{key:"buildSliderFrameItem",value:function(e){var t=document.createElement("div");return t.style.cssFloat=this.config.rtl?"right":"left",t.style.float=this.config.rtl?"right":"left",t.style.width=(this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length)+"%",t.style.marginRight=this.config.margin+"px",t.appendChild(e),t}},{key:"resolveSlidesNumber",value:function(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"===_typeof(this.config.perPage))for(var e in this.perPage=1,this.config.perPage)window.innerWidth>=e&&(this.perPage=this.config.perPage[e])}},{key:"prev",value:function(){var e,t,r,i,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,s=1<arguments.length?arguments[1]:void 0;this.innerElements.length<=this.perPage||(e=this.currentSlide,this.config.loop?this.currentSlide-n<0?(this.disableTransition(),t=this.currentSlide+this.innerElements.length,r=this.perPage,r=(this.config.rtl?1:-1)*(t+r)*(this.selectorWidth/this.perPage),i=this.config.draggable?this.drag.endX-this.drag.startX:0,this.sliderFrame.style[this.transformProperty]="translate3d(".concat(r+i,"px, 0, 0)"),this.currentSlide=t-n):this.currentSlide=this.currentSlide-n:this.currentSlide=Math.max(this.currentSlide-n,0),e!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),s)&&s.call(this))}},{key:"next",value:function(){var e,t,r,i,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,s=1<arguments.length?arguments[1]:void 0;this.innerElements.length<=this.perPage||(e=this.currentSlide,this.config.loop?this.currentSlide+n>this.innerElements.length-this.perPage?(this.disableTransition(),t=this.currentSlide-this.innerElements.length,r=this.perPage,r=(this.config.rtl?1:-1)*(t+r)*(this.selectorWidth/this.perPage),i=this.config.draggable?this.drag.endX-this.drag.startX:0,this.sliderFrame.style[this.transformProperty]="translate3d(".concat(r+i,"px, 0, 0)"),this.currentSlide=t+n):this.currentSlide=this.currentSlide+n:this.currentSlide=Math.min(this.currentSlide+n,this.innerElements.length-this.perPage),e!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),s)&&s.call(this))}},{key:"disableTransition",value:function(){this.sliderFrame.style.webkitTransition="all 0ms ".concat(this.config.easing),this.sliderFrame.style.transition="all 0ms ".concat(this.config.easing)}},{key:"enableTransition",value:function(){if(void 0===this.sliderFrame)return!1;this.sliderFrame.style.webkitTransition="all ".concat(this.config.duration,"ms ").concat(this.config.easing),this.sliderFrame.style.transition="all ".concat(this.config.duration,"ms ").concat(this.config.easing)}},{key:"goTo",value:function(e,t){var r;this.innerElements.length<=this.perPage||(r=this.currentSlide,this.currentSlide=this.config.loop?e%this.innerElements.length:Math.min(Math.max(e,0),this.innerElements.length-this.perPage),r!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),t)&&t.call(this))}},{key:"slideToCurrent",value:function(e){var t=this,r=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,i=(this.config.rtl?1:-1)*r*((this.selectorWidth+this.config.margin)/this.perPage);if(void 0===this.sliderFrame)return!1;e?requestAnimationFrame(function(){requestAnimationFrame(function(){t.enableTransition(),t.sliderFrame.style[t.transformProperty]="translate3d("+i+"px, 0, 0)"})}):(this.enableTransition(),this.sliderFrame.style[this.transformProperty]="translate3d("+i+"px, 0, 0)")}},{key:"updateAfterDrag",value:function(){var e=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),t=Math.abs(e),r=this.config.multipleDrag?Math.ceil(t/(this.selectorWidth/this.perPage)):1,i=0<e&&this.currentSlide-r<0,n=e<0&&this.currentSlide+r>this.innerElements.length-this.perPage;0<e&&t>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(r):e<0&&t>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(r),this.slideToCurrent(i||n)}},{key:"resizeHandler",value:function(){this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,this.buildSliderFrame()}},{key:"clearDrag",value:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}}},{key:"touchstartHandler",value:function(e){-1===["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)&&(e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.touches[0].pageX,this.drag.startY=e.touches[0].pageY)}},{key:"touchendHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"touchmoveHandler",value:function(e){var t;e.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-e.touches[0].pageY)<Math.abs(this.drag.startX-e.touches[0].pageX)),this.pointerDown&&this.drag.letItGo&&(e.preventDefault(),this.drag.endX=e.touches[0].pageX,this.sliderFrame.style.webkitTransition="all 0ms ".concat(this.config.easing),this.sliderFrame.style.transition="all 0ms ".concat(this.config.easing),e=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*((this.selectorWidth+this.config.margin)/this.perPage),t=this.drag.endX-this.drag.startX,e=this.config.rtl?e+t:e-t,this.sliderFrame.style[this.transformProperty]="translate3d(".concat((this.config.rtl?1:-1)*e,"px, 0, 0)"))}},{key:"mousedownHandler",value:function(e){-1===["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.target.nodeName)&&(e.preventDefault(),e.stopPropagation(),this.pointerDown=!0,this.drag.startX=e.pageX)}},{key:"mouseupHandler",value:function(e){e.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag()}},{key:"mousemoveHandler",value:function(e){if(e.preventDefault(),this.pointerDown){if("null"!=typeof e.target.closest("a")&&(this.drag.preventClick=!0),void 0===this.sliderFrame)return!1;this.drag.endX=e.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms ".concat(this.config.easing),this.sliderFrame.style.transition="all 0ms ".concat(this.config.easing);var e=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*((this.selectorWidth+this.config.margin)/this.perPage),t=this.drag.endX-this.drag.startX,e=this.config.rtl?e+t:e-t;this.sliderFrame.style[this.transformProperty]="translate3d(".concat((this.config.rtl?1:-1)*e,"px, 0, 0)")}}},{key:"mouseleaveHandler",value:function(e){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=e.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag())}},{key:"clickHandler",value:function(e){this.drag.preventClick&&e.preventDefault(),this.drag.preventClick=!1}},{key:"navNextHandler",value:function(e){e.preventDefault(),this.next(1)}},{key:"navPrevHandler",value:function(e){e.preventDefault(),this.prev(1)}},{key:"remove",value:function(e,t){if(e<0||e>=this.innerElements.length)throw new Error("Item to remove doesn't exist ðŸ˜­");var r=e<this.currentSlide,i=this.currentSlide+this.perPage-1===e;(r||i)&&this.currentSlide--,this.innerElements.splice(e,1),this.buildSliderFrame(),t&&t.call(this)}},{key:"insert",value:function(e,t,r){if(t<0||t>this.innerElements.length+1)throw new Error("Unable to inset it at this index ðŸ˜­");if(-1!==this.innerElements.indexOf(e))throw new Error("The same item in a carousel? Really? Nope ðŸ˜­");var i=0<(t<=this.currentSlide)&&this.innerElements.length;this.currentSlide=i?this.currentSlide+1:this.currentSlide,this.innerElements.splice(t,0,e),this.buildSliderFrame(),r&&r.call(this)}},{key:"prepend",value:function(e,t){this.insert(e,0),t&&t.call(this)}},{key:"append",value:function(e,t){this.insert(e,this.innerElements.length+1),t&&t.call(this)}},{key:"destroy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length?arguments[1]:void 0;if(this.detachEvents(),this.selector.style.cursor="auto",e){for(var r=document.createDocumentFragment(),i=0;i<this.innerElements.length;i++)r.appendChild(this.innerElements[i]);this.selector.innerHTML="",this.selector.appendChild(r),this.selector.removeAttribute("style")}t&&t.call(this)}}],[{key:"mergeSettings",value:function(e){var t,r={selector:".siema",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,onInit:function(){},onChange:function(){}},i=e;for(t in i)r[t]=i[t];return r}},{key:"webkitOrNot",value:function(){return"string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform"}}]),r}(),merchant=merchant||{};merchant.carousel={domReady:function(e){if("function"==typeof e)return"interactive"===document.readyState||"complete"===document.readyState?e():void document.addEventListener("DOMContentLoaded",e,!1)},init:function(){this.build(),this.events()},build:function(){if(null===document.querySelector(".merchant-carousel")&&null===document.querySelector(".has-cross-sells-carousel")&&null===document.querySelector(".merchant-woocommerce-mini-cart__cross-sell"))return!1;var e,t=_createForOfIteratorHelper(document.querySelectorAll(".merchant-carousel, #masthead .cross-sells, .merchant-side-mini-cart .cross-sells, .cart-collaterals .cross-sells"));try{for(t.s();!(e=t.n()).done;){var r,i,n,s,a,o=e.value;null===o.querySelector(".merchant-carousel-stage")&&o.querySelector(".products").classList.add("merchant-carousel-stage"),"true"!==o.getAttribute("data-initialized")&&(null===(r=o.getAttribute("data-per-page"))&&(i=o.querySelector(".products").classList.value,[1,2,3,4,5].forEach(function(e){0<i.indexOf("columns-"+e)&&(r=e)})),n=document.createElement("div"),s=o.querySelector(".merchant-carousel-stage"),n.className="merchant-carousel-wrapper",n.innerHTML=s.outerHTML,s.remove(),o.append(n),a=30,"undefined"!=typeof merchant_carousel?a=parseInt(merchant_carousel.margin_desktop):null!==o.closest(".merchant-woocommerce-mini-cart__cross-sell")&&(a=15),new Siema({parentSelector:o,selector:".merchant-carousel-stage",duration:200,easing:"ease-out",perPage:null!==r?{0:1,768:2,1025:parseInt(r)}:2,startIndex:0,draggable:!0,multipleDrag:!1,threshold:20,loop:!0,rtl:!1,margin:a,onInit:function(){window.dispatchEvent(new Event("merchant.carousel.initialized"))}}))}}catch(e){t.e(e)}finally{t.f()}},events:function(){var r,i=this;"undefined"!=typeof jQuery&&(r=!0,jQuery(document.body).on("wc_fragment_refresh added_to_cart removed_from_cart",function(){setTimeout(function(){var e=document.getElementById("site-header-cart"),t=e.querySelector(".cart_list");null!==t&&(2<t.children.length?(e.classList.remove("mini-cart-has-no-scroll"),e.classList.add("mini-cart-has-scroll")):(e.classList.remove("mini-cart-has-scroll"),e.classList.add("mini-cart-has-no-scroll"))),i.build(),r=!1},r?1e3:0)}))}},merchant.carousel.domReady(function(){merchant.carousel.init()});